import{j as e,B as n,T as I,c as x,n as V,l as W,by as O,a as y,M as B,o as F,aQ as $,C as P,bz as Q,bd as M,aZ as T,b4 as j,bA as Z,bB as G,a_ as q,bC as H}from"./index-BcecFl1Z.js";import{S as L}from"./SettingModalWrapper-BBTsJWKS.js";import{C as _}from"./CustomButtons-2kTcvzb6.js";import{C as J}from"./Checkbox-C1UzI-gw.js";import{u as z}from"./formik.esm-BY6TlLsT.js";import{E as w,I as K}from"./ImageDropzone--TLyPGNJ.js";import{c as R,b as U,a as X,d as Y,e as D}from"./index.esm-D49cUJoZ.js";const ee=({label:k,value:m,checked:o=!1,onChange:h,checkboxColor:S="black",fontSize:b=30,labelColor:c=x.black3,labelFontWeight:f=300})=>e.jsxs(n,{display:"flex",alignItems:"center",children:[e.jsx(J,{disableTouchRipple:!0,disableRipple:!0,checked:m,defaultChecked:o,onChange:h,sx:{"& .MuiSvgIcon-root":{fontSize:b,color:S}}}),e.jsx(I,{variant:"body1",sx:{color:c,fontWeight:f},children:k})]}),se={submitBtn:{fontSize:"16px",color:x.white,bgcolor:x.black,":hover":{bgcolor:x.black},height:"44px"}},le=({open:k,handleClose:m,editTabData:o})=>{const h=V(),{studioFilteredData:S}=W(O),[b,c]=y.useState(!1),[f,A]=y.useState({tagName:"",linkingStudios:-1,checked:!1}),v=R({tagName:U().min(3,"Minimum 3 characters required").max(15,"Maximum 15 characters allowed").required("Tag name is required"),linkingStudios:X().test({name:"linkingStudios",test:function(i){return this.parent.checked&&i===-1?this.createError({message:"Studio is required"}):!0}})}),C=i=>{s.setFieldValue("linkingStudios",i.target.value)},E=async(i,d)=>{var u,g,p,t;try{await Q(d,i),h(M({limit:5,page:0,search:void 0})),h(T()),m(),s.resetForm(),c(!1)}catch(a){if(((g=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:g.status_code)===400){const r=(t=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:t.data;typeof r=="object"&&Array.isArray(r)?r.map(N=>{s.setFieldError(N.fieldname,N.message)}):typeof r=="string"&&j.error(r)}}finally{c(!1)}},l=async i=>{var d,u,g,p,t;try{const a=await Z(i);if(((d=a==null?void 0:a.data)==null?void 0:d.status_code)==200){j.success("Tag Added");const r={limit:5,page:0,search:void 0};s.resetForm(),h(M(r)),h(T())}m(),c(!1)}catch(a){if(((g=(u=a==null?void 0:a.response)==null?void 0:u.data)==null?void 0:g.status_code)===400){const r=(t=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:t.data;typeof r=="object"&&Array.isArray(r)?r.map(N=>{s.setFieldError(N.fieldname,N.message)}):typeof r=="string"&&j.error(r)}c(!1)}},s=z({initialValues:f,validationSchema:v,onSubmit:async i=>{c(!0);let d={tagName:i.tagName};s.values.checked&&(d={...d,linkingStudios:i.linkingStudios}),o?E(d,o.id):l(d)}});return y.useEffect(()=>{o&&A(i=>({...i,tagName:o.tagName}))},[o]),y.useEffect(()=>{s.resetForm({values:f})},[f]),e.jsx(B,{open:k,onClose:()=>{s.resetForm(),m()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx("form",{onSubmit:s.handleSubmit,children:e.jsx(n,{sx:F.settingsModalStyle,children:e.jsx(L,{title:`${o?"Edit":"Add"} tags`,handleClose:m,children:e.jsxs(n,{width:"100%",children:[e.jsxs(n,{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",children:[e.jsx(I,{variant:"body1",width:"120px",sx:F.fieldTypo,children:"Tag Name"}),e.jsx(n,{width:"calc(100% - 120px)",children:e.jsx($,{maxLength:15,required:!0,value:s.values.tagName,onChange:i=>{var d;s.setFieldValue("tagName",(d=i==null?void 0:i.target)==null?void 0:d.value)},placeholder:"Type here...",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${x.gray2}`})})]}),s.touched.tagName&&s.errors.tagName&&e.jsx(n,{ml:"120px",children:e.jsx(w,{message:s.errors.tagName})}),s.values.checked&&e.jsxs(n,{display:"flex",width:"100%",alignItems:"center",mt:"35px",children:[e.jsx(I,{variant:"body1",width:120,sx:F.fieldTypo,children:"Select Studio"}),e.jsx(n,{width:"calc(100% - 120px)",children:e.jsx(P,{label:"Select",options:S,value:s.values.linkingStudios,onChange:C,sx:{"& .MuiOutlinedInput-root":{height:"44px"}}})})]}),s.touched.linkingStudios&&s.errors.linkingStudios&&e.jsx(n,{ml:"120px",children:e.jsx(w,{message:s.errors.linkingStudios})}),e.jsxs(n,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:"35px",children:[o?e.jsx(n,{}):e.jsx(ee,{label:"Link with studio",value:s.values.checked,onChange:(i,d)=>{s.setFieldValue("checked",d)}}),e.jsx(_,{disabled:b,title:b?"Loading..":o?"Update":"Add",type:"submit",sx:{...se.submitBtn}})]})]})})})})})},ce=({open:k,handleClose:m,editIndustryData:o,fetchIndustriesData:h})=>{const S=V(),[b,c]=y.useState(!1),[f,A]=y.useState({industryName:"",industryImages:[]}),v=R({industryName:U().required("Studio name is required").min(3,"Studio name should be at least 3 characters long").max(15,"Studio name should be less than 15 characters long"),industryImages:Y().min(1,"At least one image is required").of(D().required("Image is required"))}),C=async s=>{var i,d,u,g,p;c(!0);try{const t=new FormData;t.append("industryName",s.industryName),t.append("industryImage",s.industryImages[0].file),t.append("imageName",s.industryImages[0].name);const a=(o==null?void 0:o.id)||0,r=await G(t,a);((i=r==null?void 0:r.data)==null?void 0:i.status_code)===200&&(j.success("Industry Updated"),h&&(h(),S(q()),l.resetForm()),m())}catch(t){if(((u=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:u.status_code)===400){const a=(p=(g=t==null?void 0:t.response)==null?void 0:g.data)==null?void 0:p.data;typeof a=="object"&&Array.isArray(a)?a.map(r=>{l.setFieldError(r.fieldname,r.message)}):typeof a=="string"&&j.error(a)}}finally{c(!1)}},E=async s=>{var i,d,u,g,p;c(!0);try{const t=new FormData;t.append("industryName",s.industryName),t.append("industryImage",s.industryImages[0].file),t.append("imageName",s.industryImages[0].name);const a=await H(t);((i=a==null?void 0:a.data)==null?void 0:i.status_code)===200&&(j.success("Industry Added"),S(q()),m(),l.resetForm())}catch(t){if(((u=(d=t==null?void 0:t.response)==null?void 0:d.data)==null?void 0:u.status_code)===400){const a=(p=(g=t==null?void 0:t.response)==null?void 0:g.data)==null?void 0:p.data;typeof a=="object"&&Array.isArray(a)?a.map(r=>{l.setFieldError(r.fieldname,r.message)}):typeof a=="string"&&j.error(a)}}finally{c(!1)}},l=z({initialValues:f,validationSchema:v,onSubmit:s=>{o?C(s):E(s)}});return y.useEffect(()=>{o&&A({industryName:o.name,industryImages:[{file:o.image,name:o.originalFilename}]})},[o]),y.useEffect(()=>{l.resetForm({values:f})},[f]),e.jsx(B,{open:k,onClose:m,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx("form",{onSubmit:l.handleSubmit,children:e.jsx(n,{sx:F.settingsModalStyle,children:e.jsx(L,{title:`${o?"Edit":"Add"} Industry`,handleClose:m,children:e.jsxs(n,{width:"100%",children:[e.jsxs(n,{display:"flex",width:"100%",alignItems:"center",gap:5,children:[e.jsx(I,{variant:"body1",width:"160px",sx:F.fieldTypo,children:"Industry Name"}),e.jsx($,{maxLength:15,value:l.values.industryName,onChange:s=>{var i;l.setFieldValue("industryName",(i=s==null?void 0:s.target)==null?void 0:i.value)},placeholder:"Type here..",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${x.gray2}`})]}),l.touched.industryName&&l.errors.industryName&&e.jsx(n,{ml:"160px",children:e.jsx(w,{message:l.errors.industryName})}),e.jsxs(n,{mt:"25px",children:[e.jsx(K,{formik:l,fieldName:"industryImages",imgLimit:1}),l.touched.industryImages&&l.errors.industryImages&&e.jsx(n,{children:e.jsx(w,{message:l.errors.industryImages})})]}),e.jsx(n,{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:"35px",children:e.jsx(_,{title:b?"Loading..":o?"Update":"Add",disabled:b,type:"submit",sx:{fontSize:"16px",color:x.white,bgcolor:x.black,":hover":{bgcolor:x.black},height:"44px"}})})]})})})})})};export{ce as S,le as T,se as t};
