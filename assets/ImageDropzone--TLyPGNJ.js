import{j as t,T as d,c,a as w,B as l,o as $,aQ as T,b4 as g}from"./index-BcecFl1Z.js";import{C as U}from"./CustomButtons-2kTcvzb6.js";import{g as x}from"./index-Cj_J1U08.js";const J="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%3e%3cpath%20d='M10.5%203.5L3.5%2010.5'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M3.5%203.5L10.5%2010.5'%20stroke='black'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",_="/assets/image_upload-CMbWiv_c.svg",q="data:image/svg+xml,%3c?xml%20version='1.0'%20?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%20400%20400'%20xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3cstyle%3e.cls-1{fill:%23101010;}%3c/style%3e%3c/defs%3e%3ctitle/%3e%3cg%20id='xxx-file'%3e%3cpath%20class='cls-1'%20d='M325,105H250a5,5,0,0,1-5-5V25a5,5,0,0,1,10,0V95h70a5,5,0,0,1,0,10Z'/%3e%3cpath%20class='cls-1'%20d='M300,380H100a30,30,0,0,1-30-30V50a30,30,0,0,1,30-30H250a5,5,0,0,1,3.54,1.46l75,75A5,5,0,0,1,330,100V350A30,30,0,0,1,300,380ZM100,30A20,20,0,0,0,80,50V350a20,20,0,0,0,20,20H300a20,20,0,0,0,20-20V102.07L247.93,30Z'/%3e%3cpath%20class='cls-1'%20d='M275,180H125a5,5,0,0,1,0-10H275a5,5,0,0,1,0,10Z'/%3e%3cpath%20class='cls-1'%20d='M275,230H125a5,5,0,0,1,0-10H275a5,5,0,0,1,0,10Z'/%3e%3cpath%20class='cls-1'%20d='M275,280H125a5,5,0,0,1,0-10H275a5,5,0,0,1,0,10Z'/%3e%3cpath%20class='cls-1'%20d='M200,330H125a5,5,0,0,1,0-10h75a5,5,0,0,1,0,10Z'/%3e%3c/g%3e%3c/svg%3e",Y=({message:n})=>t.jsx(d,{variant:"body2",color:"error",children:n}),h={mainContainer:{bgcolor:c.blue2,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row",width:"100%",height:"135px",border:`1px dashed ${c.gray12}`},browseBtn:{mr:3.2,borderColor:c.orange3,color:c.orange3,":hover":{borderColor:c.orange3,bgcolor:"transparent"}},imgDetailContainer:{bgcolor:c.blue2,mt:2.4,display:"flex",flexWrap:"wrap",flexDirection:"column"},imgDetailMainContainer:{display:"flex",flexWrap:"wrap",gap:2,flexDirection:"column",py:1.8,px:1.8},imgDetailSubContainer:{height:"38px",display:"flex",alignItems:"center",justifyContent:"space-between"},displayImg:{width:"40px",height:"38px",objectFit:"cover",borderRadius:"4px"}},K=({formik:n,fieldName:o,imgLimit:u,imgLowerLimit:j,title:y,allowOnly:i="image",isEdit:m=!0})=>{var F,I,P;const v=w.useRef(null),[M,b]=w.useState(""),[V,C]=w.useState(null),R=s=>{const e=n.values[o][s];if(C(s),e.file instanceof File)b(e.name);else{const r=e.split("/"),a=r[r.length-1];b(a)}},S=s=>{var e;if(((e=n.values[o][s])==null?void 0:e.name)===""){const r=[...n.values[o]];r[s].name=M,n.setFieldValue(o,r)}C(null)},B=s=>{s.preventDefault(),s.stopPropagation()},H=s=>{if(s.preventDefault(),s.stopPropagation(),n.values[o].length<u){const e=s.dataTransfer.files;D(e)}},G=s=>{const e=s.target.files;if(e){if(n.values[o].length+e.length>u){g.warning(`You can only select up to ${u} files.`),s.target.value="";return}D(e)}s.target.value=""},E=s=>new Promise((e,r)=>{const a=new FileReader,p=new Image;a.onload=()=>{p.src=a.result},p.onload=()=>{const{width:f,height:W}=p;f>=100&&W>=100?e(!0):(g.error(x),r(x))},p.onerror=()=>{g.error(x),r(x)},a.onerror=()=>{g.error("Error reading file."),r("Error reading file.")},a.readAsDataURL(s)}),D=async s=>{const e=[],r=Array.from(s).map(async a=>{if(i==="svg")a.type==="image/svg+xml"?e.push(a):g.error("Only SVG images are supported.");else if(i==="pdf")a.type==="application/pdf"?e.push(a):g.error("Only PDF files are supported.");else if(["image/jpeg","image/jpg","image/png","image/svg+xml"].includes(a.type))try{await E(a),e.push(a)}catch(f){console.log(f)}else g.error("Only JPEG, JPG, PNG, and SVG images are supported.")});if(await Promise.all(r),e.length>0){let a=[];e.map(p=>{a=[...a,{name:p.name,file:p}]}),n.setFieldValue(o,[...n.values[o],...a])}},Z=()=>{v.current&&v.current.click()},A=(s,e)=>{const{value:r}=s.target;if(r.length<=40){const a=[...n.values[o]];a[e].name=r,n.setFieldValue(o,a)}};return t.jsxs(l,{width:"100%",children:[y&&t.jsx(d,{variant:"body1",mb:1,fontWeight:300,children:y}),t.jsxs(l,{onDragOver:B,onDrop:H,sx:h.mainContainer,children:[t.jsxs(l,{sx:{px:3.2},children:[t.jsxs(l,{sx:{...$.centerDivCss,px:1,gap:1},children:[t.jsx(l,{component:"img",src:_,width:"64px",height:"64px"}),t.jsxs(l,{display:"flex",flexDirection:"column",gap:.8,children:[t.jsxs(d,{variant:"h6",fontFamily:"Chivo",fontWeight:400,children:["Drag and drop ",i==="pdf"?"PDF":"image"," here"]}),t.jsx(d,{variant:"body2",fontWeight:400,sx:{color:c.gray7},children:j?`At least ${j} ${i==="pdf"?"PDF":"images"} required`:`${(F=n==null?void 0:n.values[o])==null?void 0:F.length}/${u} ${i==="pdf"?"PDF":"Images"}`})]})]}),t.jsx("input",{type:"file",accept:i==="svg"?"image/svg+xml":i==="pdf"?"application/pdf":"image/*",multiple:!0,ref:v,style:{display:"none"},onChange:G})]}),t.jsx(U,{variant:"outlined",title:"Browse",disabled:((I=n.values[o])==null?void 0:I.length)==u,onClick:Z,sx:h.browseBtn})]}),t.jsxs(l,{width:"100%",display:"flex",justifyContent:"space-between",mt:.8,children:[t.jsx(d,{variant:"body2",sx:{color:c.gray7},children:i==="image"&&"750*1024 PX Recommended"}),t.jsxs(d,{variant:"body2",sx:{color:c.gray7},children:["Supported formats:"," ",i=="svg"?"SVG":i=="pdf"?"PDF":"jpeg, jpg, png, svg"]})]}),((P=n.values[o])==null?void 0:P.length)>0&&t.jsx(l,{sx:h.imgDetailContainer,children:n.values[o].length>0&&t.jsx(l,{sx:h.imgDetailMainContainer,children:n.values[o].map((s,e)=>t.jsx(l,{pl:1,gap:2,sx:h.imgDetailSubContainer,children:t.jsxs(l,{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between",children:[t.jsxs(l,{display:"flex",alignItems:"center",gap:2,width:"70%",children:[t.jsx(l,{component:"img",src:s.file instanceof File?URL.createObjectURL(s.file):s.file,alt:"Fallback image",onError:r=>{r.target.src=q},sx:h.displayImg}),V===e?t.jsx(t.Fragment,{children:t.jsx(T,{value:s.name,onChange:r=>A(r,e),onBlur:()=>S(e),autoFocus:!0,sx:{width:"90%"}})}):t.jsx(d,{variant:"body1",onClick:()=>{m&&R(e)},sx:{cursor:m?"pointer":"",p:1,maxWidth:"90%",":hover":{border:m?"1px solid #d9d9d9":""}},children:s.name})]}),t.jsx(l,{component:"img",src:J,onClick:()=>{n.setFieldValue(o,n.values[o].filter((r,a)=>a!==e))},sx:{cursor:"pointer",width:"20px",height:"20px"}})]})},e))})})]})};export{Y as E,K as I};
