import{c as G,j as e,T as me,F as pe,l as ie,bM as ze,bc as _e,m as Ae,a as C,B as n,aQ as ee,C as re,b4 as V,aP as Ge,aO as Pe,bF as Ve,aM as $e,aL as fe,bG as He,o as je,t as Be,bN as be,bO as De,bP as We,bQ as Re}from"./index-BcecFl1Z.js";import{u as Me}from"./formik.esm-BY6TlLsT.js";import{S as R,F as M,C as Je,a as Qe,b as Ze}from"./SettingsHeader-CQCGcilU.js";import{S as Ke,e as ye,f as Ee,g as Ce,h as Ne,i as Te}from"./tabsFieldData-D3yi5tQA.js";import{E as b,I as J}from"./ImageDropzone--TLyPGNJ.js";import{R as j,d as k,e as Xe,i as Ye}from"./index-Cj_J1U08.js";import{C as ke}from"./CustomTextArea-BvZd_Hkf.js";import{E as he}from"./Editor-CmyFx_XS.js";import{P as et}from"./PreviewModal-CnjfHEFi.js";import{C as tt}from"./CaseStudy_WhitepaperPreview-DCj3-Wrr.js";import{r as it}from"./HelperFunctions-DWwEU7oF.js";import{b as A,a as ge,d as $,e as W,c as nt}from"./index.esm-D49cUJoZ.js";import"./Materialcons-Die1CzwC.js";import"./Search-DNIIj65s.js";import"./Tooltip-Ekydzdoo.js";import"./Checkbox-C1UzI-gw.js";import"./CustomButtons-2kTcvzb6.js";import"./Tabs-DUTfjCyQ.js";import"./Navbar-5U6_2lyq.js";import"./ListItemText-DYwIz_-f.js";const at="/assets/project-details-BJnr85jv.svg",st="/assets/client-details-m1e9SdRR.svg",ue="/assets/case-study-need-DuChue5c.svg",ct="/assets/contact-detail-BgeLNTSb.svg",ot={labelCss:{width:"100%",maxWidth:"190px",color:G.black3,fontWeight:300,textTransform:"uppercase"}},te=({title:i})=>e.jsx(me,{variant:"body1",sx:ot.labelCss,children:i}),lt=({formik:i,resourceId:r,isEdit:D,status:F,selectedCompanyData:y,handleErrorTabSwitch:E})=>{const{state:d}=pe(),{otherServicesData:U}=ie(ze),{tagsFilteredData:v}=ie(_e),{companyFilteredData:O}=ie(Ae),[N,L]=C.useState(!1);return C.useEffect(()=>{d&&(d!=null&&d.from)&&(d==null?void 0:d.from)==="home"&&L(!0)},[d]),e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:"755px",mx:"auto"},children:[e.jsx(n,{width:"60px"}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(M,{title:"Project details",imageSrc:at,imgHeight:"135",description:"Project title and tags and images along with the image caption - will be showcased as such"}),e.jsxs(n,{mt:"44px",id:"title",children:[e.jsx(ee,{maxLength:100,value:i.values.title,onChange:l=>{var a;i.setFieldValue("title",(a=l==null?void 0:l.target)==null?void 0:a.value)},placeholder:r===j.CASE_STUDIES?"Case study title here..":"Initiative title here..",border:"none",fontSize:"24px",placeholderFontSize:"24px",placeholderFontWeight:400,placeholderFontFamily:"Noto Serif",borderBottom:`1px solid ${G.gray2}`,sx:{width:"100%"},name:"projectTitle"}),i.touched.title&&i.errors.title&&e.jsx(n,{children:e.jsx(b,{message:i.errors.title})})]}),e.jsxs(n,{mt:"32px",id:"tags",children:[e.jsx(Je,{placeholder:"Add tags",formik:i,fieldName:"tags",options:v}),i.touched.tags&&i.errors.tags&&e.jsx(n,{children:e.jsx(b,{message:i.errors.tags})})]}),e.jsxs(n,{mt:"32px",id:"companyId",children:[e.jsx(re,{label:"Select Company",disabled:D?F!==0:!N,options:O,value:i.values.companyId,onChange:l=>{var a;i.setFieldValue("companyId",(a=l==null?void 0:l.target)==null?void 0:a.value)},sx:{"& .MuiOutlinedInput-root":{height:"44px"}}}),i.touched.companyId&&i.errors.companyId&&e.jsx(n,{children:e.jsx(b,{message:i.errors.companyId})})]}),e.jsxs(n,{mt:r===j.CASE_STUDIES?"32px":"180px",id:"images",children:[e.jsx(J,{formik:i,fieldName:"images",imgLowerLimit:3,imgLimit:100}),i.touched.images&&i.errors.images&&e.jsx(n,{children:e.jsx(b,{message:i.errors.images})})]})]}),e.jsx(n,{width:"60px"})]})}),r===j.CASE_STUDIES&&e.jsx(n,{mt:"16px",children:e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:"755px",mx:"auto"},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(n,{sx:{ml:"60px"},children:e.jsx(M,{title:"Client details",imageSrc:st,imgHeight:"95",description:"Client details - will be showcased as such"})}),e.jsxs(n,{mt:"44px",sx:{ml:"60px"},id:"clientName",children:[e.jsx(ee,{value:i.values.clientName,onChange:l=>{var a;i.setFieldValue("clientName",(a=l==null?void 0:l.target)==null?void 0:a.value)},name:"clientName",placeholder:"Client Name",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${G.gray2}`,sx:{width:"100%"}}),i.touched.clientName&&i.errors.clientName&&e.jsx(n,{children:e.jsx(b,{message:i.errors.clientName})})]}),e.jsxs(n,{sx:{ml:"60px",mt:"32px",mb:10},id:"clientDescription",children:[e.jsx(ke,{value:i.values.clientDescription,handleChange:l=>{var a;return i.setFieldValue("clientDescription",(a=l==null?void 0:l.target)==null?void 0:a.value)},placeholder:"Description for client"}),i.touched.clientDescription&&i.errors.clientDescription&&e.jsx(n,{children:e.jsx(b,{message:i.errors.clientDescription})})]}),e.jsxs(n,{display:"flex",mt:"2rem",flexDirection:"column",gap:3,ml:"60px",children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},id:"clientLocation",children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(te,{title:"LOCATION"}),e.jsx(ee,{value:i.values.clientLocation,onChange:l=>{var a;i.setFieldValue("clientLocation",(a=l==null?void 0:l.target)==null?void 0:a.value)},placeholder:"Type here",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${G.gray2}`,sx:{width:"100%"}})]}),i.touched.clientLocation&&i.errors.clientLocation&&e.jsx(n,{width:"100%",ml:"60%",children:e.jsx(b,{message:i.errors.clientLocation})})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},id:"clientOtherServices",children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(te,{title:"OTHER SERVICES"}),e.jsx(re,{label:"Select",options:U,value:i.values.clientOtherServices,onChange:l=>{var a;i.setFieldValue("clientOtherServices",(a=l==null?void 0:l.target)==null?void 0:a.value)}})]}),i.touched.clientOtherServices&&i.errors.clientOtherServices&&e.jsx(n,{width:"100%",ml:"60%",children:e.jsx(b,{message:i.errors.clientOtherServices})})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},id:"clientIndustriesServed",children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(te,{title:"INDUSTRIES SERVED"}),e.jsx(re,{label:"Select",options:y&&(y==null?void 0:y.length)>0?y[0].industries:[],onOpen:()=>{i.values.companyId===-1&&V.warning("Company selection is required.")},value:i.values.clientIndustriesServed,onChange:l=>{var a;i.setFieldValue("clientIndustriesServed",(a=l==null?void 0:l.target)==null?void 0:a.value)}})]}),i.touched.clientIndustriesServed&&i.errors.clientIndustriesServed&&e.jsx(n,{width:"100%",ml:"60%",children:e.jsx(b,{message:i.errors.clientIndustriesServed})})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},id:"clientGrossSize",children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(te,{title:"GROSS SIZE"}),e.jsx(ee,{value:i.values.clientGrossSize,onChange:l=>{var a;return i.setFieldValue("clientGrossSize",(a=l==null?void 0:l.target)==null?void 0:a.value)},placeholder:"Type here",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${G.gray2}`,sx:{width:"100%"}})]}),i.touched.clientGrossSize&&i.errors.clientGrossSize&&e.jsx(n,{width:"100%",ml:"60%",children:e.jsx(b,{message:i.errors.clientGrossSize})})]})]}),e.jsxs(n,{mt:"32px",sx:{ml:"60px"},children:[e.jsx(J,{formik:i,fieldName:"clientImage",imgLimit:1}),i.touched.clientImage&&i.errors.clientImage&&e.jsx(n,{children:e.jsx(b,{message:i.errors.clientImage})}),e.jsx(n,{id:"clientImage"})]})]}),e.jsx(n,{width:"60px"})]})})})]})},rt=({formik:i,resourceId:r})=>e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:"755px",minHeight:"70vh",mx:"auto"},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(n,{sx:{ml:"60px"},children:e.jsx(M,{title:"The Need",imageSrc:ue,imgHeight:"166",description:"Adding need and images along with the image - will be showcased as such"})}),e.jsxs(n,{mt:"36px",id:"needDescription",children:[e.jsx(he,{formik:i,fieldName:"needDescription",placeholder:"Describe the need here..."}),i.touched.needDescription&&i.errors.needDescription&&e.jsx(n,{sx:{ml:"60px"},children:e.jsx(b,{message:i.errors.needDescription})})]}),e.jsxs(n,{sx:{ml:"60px",mt:"180px"},id:"needImage",children:[e.jsx(J,{formik:i,fieldName:"needImage",imgLimit:1}),i.touched.needImage&&i.errors.needImage&&e.jsx(n,{children:e.jsx(b,{message:i.errors.needImage})})]})]}),e.jsx(n,{width:"60px"})]})}),dt=({formik:i,resourceId:r})=>e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:"755px",minHeight:"70vh",mx:"auto"},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(n,{sx:{ml:"60px"},children:e.jsx(M,{title:"The Solution",imageSrc:ue,imgHeight:"166",description:"Adding solution and images along with the image - will be showcased as such"})}),e.jsxs(n,{mt:"36px",id:"solutionDescription",children:[e.jsx(he,{formik:i,fieldName:"solutionDescription",placeholder:"Describe the solution here..."}),i.touched.solutionDescription&&i.errors.solutionDescription&&e.jsx(n,{sx:{ml:"60px"},children:e.jsx(b,{message:i.errors.solutionDescription})})]}),e.jsxs(n,{sx:{ml:"60px",mt:"180px"},id:"solutionImage",children:[e.jsx(J,{formik:i,fieldName:"solutionImage",imgLimit:1}),i.touched.solutionImage&&i.errors.solutionImage&&e.jsx(n,{children:e.jsx(b,{message:i.errors.solutionImage})})]})]}),e.jsx(n,{width:"60px"})]})}),mt=({formik:i,resourceId:r})=>e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:"755px",minHeight:"70vh",mx:"auto"},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(n,{sx:{ml:"60px"},children:e.jsx(M,{title:"The Conclusion",imageSrc:ue,imgHeight:"166",description:"Adding conclusion and images along with the image - will be showcased as such"})}),e.jsxs(n,{mt:"36px",id:"conclusionDescription",children:[e.jsx(he,{formik:i,fieldName:"conclusionDescription",placeholder:"Describe the conclusion here..."}),i.touched.conclusionDescription&&i.errors.conclusionDescription&&e.jsx(n,{sx:{ml:"60px"},children:e.jsx(b,{message:i.errors.conclusionDescription})})]}),e.jsxs(n,{sx:{ml:"60px",mt:"180px"},id:"conclusionImage",children:[e.jsx(J,{formik:i,fieldName:"conclusionImage",imgLimit:1}),i.touched.conclusionImage&&i.errors.conclusionImage&&e.jsx(n,{children:e.jsx(b,{message:i.errors.conclusionImage})})]})]}),e.jsx(n,{width:"60px"})]})}),pt={display:"flex",alignItems:"center",mt:"32px"},de=({label:i,name:r,formik:D,maxLength:F})=>e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:pt,id:r,children:[e.jsx(te,{title:i}),e.jsx(ee,{maxLength:F,value:D.values[r],onChange:D.handleChange,name:r,placeholder:"Type here",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${G.gray2}`,sx:{width:"100%"}})]}),D.touched[r]&&D.errors[r]&&e.jsx(n,{ml:"30%",children:e.jsx(b,{message:D.errors[r]})})]}),gt=({formik:i,resourceId:r})=>e.jsx(R,{children:e.jsxs(n,{display:"flex",sx:{maxWidth:755,minHeight:"70vh",mx:"auto"},children:[e.jsx(n,{width:60}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(M,{title:"Contact Person",imageSrc:ct,imgHeight:"166",description:"Adding solution and images along with the image - will be showcased as such"}),e.jsxs(n,{mt:"44px",children:[e.jsx(de,{maxLength:20,label:"Name",name:"contactName",formik:i}),e.jsx(de,{maxLength:20,label:"Title",name:"contactTitle",formik:i}),e.jsx(de,{label:"Email",name:"contactEmail",formik:i})]}),e.jsxs(n,{mt:"180px",children:[e.jsx(J,{title:"Add Thumbnail",formik:i,fieldName:"thumbnail",imgLimit:1}),i.touched.thumbnail&&i.errors.thumbnail&&e.jsx(n,{children:e.jsx(b,{message:i.errors.thumbnail})}),e.jsx(n,{id:"thumbnail"})]})]}),e.jsx(n,{width:60})]})}),ht={clientName:A().required("Client name is required").min(3,"Client name should be at least 3 characters long").max(25,"Client name should be less than 25 characters long"),clientDescription:A().required("Client description is required").min(3,"Client description should be at least 3 characters long"),clientLocation:A().required("Client location is required").min(3,"Client location should be at least 3 characters long").max(100,"Client location should be less than 100 characters long"),clientOtherServices:ge().test({name:"clientOtherServices",test:function(i){return i===-1?this.createError({message:"Other services is required"}):!0}}),clientIndustriesServed:ge().test({name:"clientIndustriesServed",test:function(i){return i===-1?this.createError({message:"Industries served is required"}):!0}}),clientGrossSize:A().required("Client gross size is required").min(3,"Client gross size should be at least 3 characters long").max(25,"Client gross size should be less than 25 characters long"),clientImage:$().min(1,"At least 1 image is required").of(W().required("Image is required"))},we=i=>nt({title:A().required("Initiative title is required").min(3,"Initiative title should be at least 3 characters long").max(100,"Initiative title should be less than 100 characters long"),tags:$().min(1,"At least one tag is required").max(7,"A maximum of 7 tags is allowed").of(A().required("Tag is required")),companyId:ge().test({name:"companyId",test:function(r){return r===-1?this.createError({message:"Company is required"}):!0}}),images:$().min(3,"At least 3 images are required").of(W().required("Images are required")),...i===j.CASE_STUDIES&&ht,needDescription:A().test({name:"needDescription",test:function(r){return r?JSON.parse(r).blocks.length===0?this.createError({message:"description is required"}):!0:this.createError({message:"description is required"})}}),needImage:$().of(W()),solutionDescription:A().test({name:"solutionDescription",test:function(r){return r?JSON.parse(r).blocks.length===0?this.createError({message:"description is required"}):!0:this.createError({message:"description is required"})}}),solutionImage:$().of(W()),conclusionDescription:A().test({name:"conclusionDescription",test:function(r){return r?JSON.parse(r).blocks.length===0?this.createError({message:"description is required"}):!0:this.createError({message:"description is required"})}}),conclusionImage:$().of(W()),contactName:A().required("Contact name is required").min(3,"Contact name should be at least 3 characters long").max(20,"Contact name should be less than 20 characters long"),contactTitle:A().required("Contact title is required").min(3,"Contact title should be at least 3 characters long").max(20,"Contact title should be less than 20 characters long"),contactEmail:A().email("Invalid email format").required("Contact email is required"),thumbnail:$().min(1,"At least one thumbnail is required").of(W().required("Thumbnail is required"))}),ut=async(i,r,D,F,y)=>{var E,d,U,v,O,N,L;D(!0);try{const l=await Ge({id:i,view:r});if(l.data.status_code===200){const a=(d=(E=l==null?void 0:l.data)==null?void 0:E.data)==null?void 0:d.data[0];if(a){let f={id:a.id,companyId:a.companyId,title:a.title,tags:[],images:[],clientName:"",clientDescription:"",clientLocation:"",clientOtherServices:-1,clientIndustriesServed:-1,clientGrossSize:"",clientImage:[],needDescription:"",needImage:[],solutionDescription:"",solutionImage:[],conclusionDescription:"",conclusionImage:[],contactName:"",contactTitle:"",contactEmail:"",thumbnail:[],isShareable:1};a.tags&&a.tags.length>0&&(f.tags=a.tags.map(q=>q.id)),((U=a.caseStudyProjectImage)==null?void 0:U.length)>0&&(f.images=a.caseStudyProjectImage.map(q=>({file:q.imageUrl,name:q.imageName}))),f={...f,clientName:a.clientName||"",clientDescription:a.clientDescription||"",clientLocation:a.clientLocation||"",clientOtherServices:a.clientOtherServicesId??-1,clientIndustriesServed:a.clientIndustriesServed??-1,clientGrossSize:a.clientGrossSize||"",clientImage:a.clientImage?[{file:a.clientImage,name:a.clientImageName}]:[]},a.caseStudyNeed&&(f.needDescription=a.caseStudyNeed.description||"",((v=a.caseStudyNeed.imageUrl)==null?void 0:v.length)>0&&(f.needImage=[{file:a.caseStudyNeed.imageUrl,name:a.caseStudyNeed.imageName}])),a.caseStudySolution&&(f.solutionDescription=a.caseStudySolution.description||"",((O=a.caseStudySolution.imageUrl)==null?void 0:O.length)>0&&(f.solutionImage=[{file:a.caseStudySolution.imageUrl,name:a.caseStudySolution.imageName}])),a.caseStudyConclusion&&(f.conclusionDescription=a.caseStudyConclusion.description||"",((N=a.caseStudyConclusion.imageUrl)==null?void 0:N.length)>0&&(f.conclusionImage=[{file:a.caseStudyConclusion.imageUrl,name:a.caseStudyConclusion.imageName}])),f={...f,contactName:a.contactName||"",contactTitle:a.contactTitle||"",contactEmail:a.contactEmail||""},((L=a.thumbnail)==null?void 0:L.length)>0&&(f.thumbnail=[{file:a.thumbnail,name:a.thumbnailName}]),f.isShareable=a.isShareable,F(f),y(a.status)}}}catch(l){console.log(l)}finally{D(!1)}},xt=async(i,r,D,F,y)=>{var E,d,U,v,O,N,L,l,a,f,q,H,Q,Z,K,P,ne,ae,se,ce;D(!0);try{const z=await Pe({id:i,view:r});if(z.data.status_code===200){const o=(d=(E=z==null?void 0:z.data)==null?void 0:E.data)==null?void 0:d.data[0];if(o){let p={companyId:o.companyId,title:o.title,tags:[],images:[],needDescription:"",needImage:[],solutionDescription:"",solutionImage:[],conclusionDescription:"",conclusionImage:[],contactName:"",contactTitle:"",contactEmail:"",thumbnail:[],isShareable:1};o.tags&&o.tags.length>0&&(p={...p,tags:o.tags.map(B=>B.id)}),o.initiativeProjectImage&&o.initiativeProjectImage.length>0&&(p={...p,images:o.initiativeProjectImage.map(B=>({file:B.imageUrl,name:B.imageName}))}),o.initiativeNeed&&((U=o.initiativeNeed)!=null&&U.description)&&(p={...p,needDescription:(v=o.initiativeNeed)==null?void 0:v.description}),o.initiativeNeed&&((N=(O=o.initiativeNeed)==null?void 0:O.imageUrl)==null?void 0:N.length)>0&&(p={...p,needImage:[{file:(L=o.initiativeNeed)==null?void 0:L.imageUrl,name:(l=o.initiativeNeed)==null?void 0:l.imageName}]}),o.initiativeSolution&&((a=o.initiativeSolution)!=null&&a.description)&&(p={...p,solutionDescription:(f=o.initiativeSolution)==null?void 0:f.description}),o.initiativeSolution&&((H=(q=o.initiativeSolution)==null?void 0:q.imageUrl)==null?void 0:H.length)>0&&(p={...p,solutionImage:[{file:(Q=o.initiativeSolution)==null?void 0:Q.imageUrl,name:(Z=o.initiativeSolution)==null?void 0:Z.imageName}]}),o.initiativeConclusion&&((K=o.initiativeConclusion)!=null&&K.description)&&(p={...p,conclusionDescription:(P=o.initiativeConclusion)==null?void 0:P.description}),o.initiativeConclusion&&((ae=(ne=o.initiativeConclusion)==null?void 0:ne.imageUrl)==null?void 0:ae.length)>0&&(p={...p,conclusionImage:[{file:(se=o.initiativeConclusion)==null?void 0:se.imageUrl,name:(ce=o.initiativeConclusion)==null?void 0:ce.imageName}]}),o.contactName&&o.contactName.length>0&&(p={...p,contactName:o.contactName}),o.contactTitle&&o.contactTitle.length>0&&(p={...p,contactTitle:o.contactTitle}),o.contactEmail&&o.contactEmail.length>0&&(p={...p,contactEmail:o.contactEmail}),o.thumbnail&&o.thumbnail.length>0&&(p={...p,thumbnail:[{file:o.thumbnail,name:o.thumbnailName||""}]}),p={...p,isShareable:o==null?void 0:o.isShareable},F(p),y(o.status)}}}catch(z){console.log(z)}finally{D(!1)}},_t=()=>{var Ie;const{id:i}=Ve(),{state:r}=pe(),{companyId:D}=ie($e),F=pe(),[y,E]=fe.useState(0),[d,U]=C.useState(F.pathname.includes("initiative")?j.INITIATIVES:j.CASE_STUDIES),[v,O]=C.useState(!1),[N,L]=C.useState(-1),[l,a]=C.useState(!1),[f,q]=C.useState(!1),[H,Q]=C.useState(0),[Z,K]=C.useState(!1),[P,ne]=C.useState(!1),{companyFilteredData:ae}=ie(Ae),[se,ce]=C.useState([]),z=async t=>{var S,h;q(!0);try{const u=await Be({id:t});ce((h=(S=u==null?void 0:u.data)==null?void 0:S.data)==null?void 0:h.data)}catch(u){console.log(u)}finally{q(!1)}},[o,p]=C.useState(!1),B=()=>{p(!0)},Fe=()=>{p(!1)},[le,xe]=fe.useState({title:"",tags:[],companyId:r&&(r!=null&&r.from)&&(r==null?void 0:r.from)==="home"?-1:D,images:[],clientName:"",clientDescription:"",clientLocation:"",clientOtherServices:-1,clientIndustriesServed:-1,clientGrossSize:"",clientImage:[],needDescription:"",needImage:[],solutionDescription:"",solutionImage:[],conclusionDescription:"",conclusionImage:[],contactName:"",contactTitle:"",contactEmail:"",thumbnail:[],isShareable:1}),Se=(t,S)=>{E(S)},X=t=>{const S=Object.keys(t);if(S.length>0){const h=S[0];let u=0;ye.includes(h)?u=0:Ee.includes(h)?u=1:Ce.includes(h)?u=2:Ne.includes(h)?u=3:Te.includes(h)&&(u=4),u!==void 0&&u!==y&&Se(null,u),setTimeout(()=>{const T=document.getElementById(h);T&&(T.scrollIntoView({behavior:"smooth",block:"center"}),T.focus())},300)}},Y=t=>{const S=it(t,we(d));if(Object.keys(S).length>0){const h=Object.keys(S)[0];ye.includes(h)?E(0):Ee.includes(h)?E(1):Ce.includes(h)?E(2):Ne.includes(h)?E(3):Te.includes(h)&&E(4)}},Oe=async t=>{t.preventDefault();const S=await g.validateForm();g.setTouched(Object.keys(g.initialValues).reduce((h,u)=>({...h,[u]:!0}),{})),Object.keys(S).length?(Y(S),X(S)):g.handleSubmit()},Le=async t=>{var S,h,u,T,_,s,I;K(!0);try{const c=new FormData;c.append("title",t.title),t.tags.forEach((w,oe)=>{c.append(`tags[${oe}]`,w.toString())}),c.append("companyId",t.companyId.toString()),t.contactName.length>0&&c.append("contactName",t.contactName),t.contactTitle&&c.append("contactTitle",t.contactTitle),t.contactEmail&&c.append("contactEmail",t.contactEmail),t.needDescription.length>0&&c.append("needDescription",t.needDescription),t.needImage.length>0&&(c.append("needImage",t.needImage[0].file),c.append("needImageName",t.needImage[0].name)),t.solutionDescription.length>0&&c.append("solutionDescription",t.solutionDescription),t.solutionImage.length>0&&(c.append("solutionImage",t.solutionImage[0].file),c.append("solutionImageName",t.solutionImage[0].name)),t.conclusionDescription&&c.append("conclusionDescription",t.conclusionDescription),t.conclusionImage.length>0&&(c.append("conclusionImage",t.conclusionImage[0].file),c.append("conclusionImageName",t.conclusionImage[0].name)),t.thumbnail.length>0&&(c.append("thumbnail",t.thumbnail[0].file),c.append("thumbnailName",t.thumbnail[0].name)),t.images.length&&(t.images.forEach((w,oe)=>{c.append("images",w.file)}),t.images.forEach((w,oe)=>{c.append(`imageNames[${oe}]`,w.name)})),d===j.CASE_STUDIES&&(t.clientName&&t.clientName.length>0&&c.append("clientName",t.clientName),t.clientDescription&&t.clientDescription.length>0&&c.append("clientDescription",t.clientDescription),t.clientLocation&&t.clientLocation.length>0&&c.append("clientLocation",t.clientLocation),t.clientOtherServices&&t.clientOtherServices!=-1&&c.append("clientOtherServices",(S=t.clientOtherServices)==null?void 0:S.toString()),t.clientGrossSize&&t.clientGrossSize.length>0&&c.append("clientGrossSize",t.clientGrossSize),t.clientImage&&t.clientImage.length>0&&(c.append("clientImage",t.clientImage[0].file),c.append("clientImageName",t.clientImage[0].name)));let x={status:k.draft};N!=-1&&(x={...x,id:N});let m;d===j.CASE_STUDIES?m=await be(c,x):m=await De(c,x),((h=m==null?void 0:m.data)==null?void 0:h.status_code)===200&&(V.success("Draft Saved"),L((_=(T=(u=m==null?void 0:m.data)==null?void 0:u.data)==null?void 0:T.data)==null?void 0:_.id))}catch(c){console.log(c);const x=(I=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:I.data;if(console.log(x),Array.isArray(x)){if(x.forEach(m=>{g.setFieldError(m.fieldname,m.message)}),x.length>0){const m=x[0];Y({[m.fieldname]:m.message}),X({[m.fieldname]:m.message})}}else typeof x=="string"&&V.error(x)}finally{K(!1)}},qe=async t=>{var S,h,u,T,_;a(!0);try{const s=new FormData;s.append("title",t.title),t.tags.forEach((x,m)=>{s.append(`tags[${m}]`,x.toString())}),s.append("companyId",t.companyId.toString()),s.append("contactName",t.contactName),s.append("contactTitle",t.contactTitle),s.append("contactEmail",t.contactEmail),s.append("needDescription",t.needDescription),t.needImage.length>0&&(s.append("needImage",t.needImage[0].file),s.append("needImageName",t.needImage[0].name)),s.append("solutionDescription",t.solutionDescription),t.solutionImage.length>0&&(s.append("solutionImage",t.solutionImage[0].file),s.append("solutionImageName",t.solutionImage[0].name)),s.append("conclusionDescription",t.conclusionDescription),t.conclusionImage.length>0&&(s.append("conclusionImage",t.conclusionImage[0].file),s.append("conclusionImageName",t.conclusionImage[0].name)),s.append("thumbnail",t.thumbnail[0].file),s.append("thumbnailName",t.thumbnail[0].name),t.images.forEach((x,m)=>{s.append("images",x.file)}),t.images.forEach((x,m)=>{s.append(`imageNames[${m}]`,x.name)}),d===j.CASE_STUDIES&&t.clientName&&t.clientDescription&&t.clientLocation&&t.clientOtherServices&&t.clientGrossSize&&t.clientIndustriesServed&&(s.append("clientName",t.clientName),s.append("clientDescription",t.clientDescription),s.append("clientLocation",t.clientLocation),s.append("clientOtherServices",(S=t.clientOtherServices)==null?void 0:S.toString()),s.append("clientIndustriesServed",(h=t.clientIndustriesServed)==null?void 0:h.toString()),s.append("clientGrossSize",t.clientGrossSize),t.clientImage&&t.clientImage.length>0&&(s.append("clientImage",t.clientImage[0].file),s.append("clientImageName",t.clientImage[0].name)));let I={status:k.create};N!=-1&&(I={...I,id:N});let c;d===j.CASE_STUDIES?c=await be(s,I):c=await De(s,I),((u=c==null?void 0:c.data)==null?void 0:u.status_code)===200&&(V.success(`${d===j.CASE_STUDIES?"Casestudy":"Initiative"} Added`),E(0),g.resetForm())}catch(s){const I=(_=(T=s==null?void 0:s.response)==null?void 0:T.data)==null?void 0:_.data;if(Array.isArray(I)){if(I.forEach(c=>{g.setFieldError(c.fieldname,c.message)}),I.length>0){const c=I[0];Y({[c.fieldname]:c.message}),X({[c.fieldname]:c.message})}}else typeof I=="string"&&V.error(I)}finally{a(!1)}},Ue=async t=>{var S,h,u,T,_;if(i){a(!0);try{const s=new FormData;s.append("title",t.title),t.tags.forEach((m,w)=>{s.append(`tags[${w}]`,m.toString())}),s.append("companyId",t.companyId.toString()),s.append("contactName",t.contactName),s.append("contactTitle",t.contactTitle),s.append("contactEmail",t.contactEmail),s.append("needDescription",t.needDescription),t.needImage.length>0&&(s.append("needImage",t.needImage[0].file),s.append("needImageName",t.needImage[0].name)),s.append("solutionDescription",t.solutionDescription),t.solutionImage.length>0&&(s.append("solutionImage",t.solutionImage[0].file),s.append("solutionImageName",t.solutionImage[0].name)),s.append("conclusionDescription",t.conclusionDescription),t.conclusionImage.length>0&&(s.append("conclusionImage",t.conclusionImage[0].file),s.append("conclusionImageName",t.conclusionImage[0].name)),s.append("thumbnail",t.thumbnail[0].file),s.append("thumbnailName",t.thumbnail[0].name),t.images.filter(m=>typeof m.file=="string").forEach((m,w)=>{typeof m.file=="string"&&(s.append(`existingImages[${w}]`,m.file),s.append(`existingImageNames[${w}]`,m.name))}),t.images.filter(m=>typeof m.file=="object").forEach((m,w)=>{typeof m.file=="object"&&(s.append("images",m.file),s.append(`imageNames[${w}]`,m.name))}),d===j.CASE_STUDIES&&t.clientName&&t.clientDescription&&t.clientLocation&&t.clientOtherServices&&t.clientGrossSize&&t.clientIndustriesServed&&(s.append("clientName",t.clientName),s.append("clientDescription",t.clientDescription),s.append("clientLocation",t.clientLocation),s.append("clientOtherServices",(S=t.clientOtherServices)==null?void 0:S.toString()),s.append("clientIndustriesServed",(h=t.clientIndustriesServed)==null?void 0:h.toString()),s.append("clientGrossSize",t.clientGrossSize),t.clientImage&&t.clientImage.length>0&&(s.append("clientImage",t.clientImage[0].file),s.append("clientImageName",t.clientImage[0].name)));let x;d===j.CASE_STUDIES?x=await We(s,atob(i),{status:k.published}):x=await Re(s,atob(i),{status:k.published}),((u=x==null?void 0:x.data)==null?void 0:u.status_code)===200&&(V.success(`${d===j.CASE_STUDIES?"Casestudy":"Initiative"} Updated`),E(0),g.resetForm())}catch(s){const I=(_=(T=s==null?void 0:s.response)==null?void 0:T.data)==null?void 0:_.data;if(Array.isArray(I)){if(I.forEach(c=>{g.setFieldError(c.fieldname,c.message)}),I.length>0){const c=I[0];Y({[c.fieldname]:c.message}),X({[c.fieldname]:c.message})}}else typeof I=="string"&&V.error(I)}finally{a(!1)}}},g=Me({initialValues:le,validationSchema:we(d),onSubmit:t=>{P?Ue(t):qe(t)}});C.useEffect(()=>{i&&atob(i)&&(ne(!0),d===j.CASE_STUDIES?ut(parseInt(atob(i)),1,O,xe,Q):xt(parseInt(atob(i)),1,O,xe,Q),L(parseInt(atob(i))));const t=F.pathname.includes("initiative")?j.INITIATIVES:j.CASE_STUDIES;U(t)},[i,F.pathname]);const ve=()=>{Y(g.errors),X(g.errors)};return C.useEffect(()=>{g.resetForm({values:le})},[le]),C.useEffect(()=>{d===j.CASE_STUDIES&&g.values.companyId!=-1&&z(g.values.companyId)},[g.values.companyId]),e.jsxs(n,{bgcolor:G.white2,borderTop:"1px solid white",children:[(l||v||Z||f)&&e.jsx(He,{}),e.jsx(Qe,{}),e.jsx(et,{open:o,handleClose:Fe,children:e.jsx(tt,{resourceId:d,previewData:g.values})}),e.jsx(n,{sx:{...je.initialMainComponet,...je.cmsWrapperCss,mx:"auto",minHeight:"100vh"},children:e.jsxs("form",{onSubmit:Oe,children:[e.jsx(n,{mb:2.6,children:e.jsx(Ze,{update:P,loading:l,status:H,saveAsDraftLoading:Z,disableSaveAsDraft:P?H!==k.published:!0,handleSaveAsDraft:()=>{g.setFieldTouched("title",!0),g.setFieldTouched("companyId",!0),g.setFieldTouched("thumbnail",!0),Le(g.values)},isSharable:g.values.isShareable,handleIsShareable:t=>{g.setFieldValue("isShareable",t)},handlePreview:B,title:e.jsx(n,{mb:{md:.5},children:e.jsxs(me,{variant:"h5",fontFamily:"Chivo",fontWeight:400,children:[d===j.CASE_STUDIES?"Case study ":"Initiatives ",g.values.companyId!==-1&&"@",e.jsxs(me,{component:"span",variant:"h4",fontWeight:700,sx:{color:G.orange1},children:[" ",g.values.companyId!==-1&&(((Ie=ae.find(t=>t.id==g.values.companyId))==null?void 0:Ie.name)||"")]})," "]})})})}),e.jsx(Ke,{tabsData:d===j.CASE_STUDIES?Xe:Ye,handleChange:Se,value:y}),y===0&&e.jsx(lt,{selectedCompanyData:se,formik:g,resourceId:d,isEdit:P,status:H,handleErrorTabSwitch:ve}),y===1&&e.jsx(rt,{formik:g,resourceId:d}),y===2&&e.jsx(dt,{formik:g,resourceId:d}),y===3&&e.jsx(mt,{formik:g,resourceId:d}),y===4&&e.jsx(gt,{formik:g,resourceId:d})]})})]})};export{_t as default};
