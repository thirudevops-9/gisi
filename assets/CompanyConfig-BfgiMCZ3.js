import{l as ie,p as oe,a as b,j as e,B as i,aQ as B,c as g,C as ne,bi as re,b4 as z,T as f,o as S,bf as me,bD as ce,M as ue,bE as H,I as K,n as pe,aL as he,bF as xe,bG as ge,t as ve,bH as ye,b0 as Z,bI as be}from"./index-BcecFl1Z.js";import{S as je,c as _,a as J,b as Q,d as fe}from"./tabsFieldData-D3yi5tQA.js";import{c as Ce}from"./index-Cj_J1U08.js";import{u as se}from"./formik.esm-BY6TlLsT.js";import{S as V,F as G,C as we,a as Se,b as Ie}from"./SettingsHeader-CQCGcilU.js";import{c as De}from"./companypage-CEeT91cX.js";import{E as j,I as Y}from"./ImageDropzone--TLyPGNJ.js";import{i as Ee,r as Ae}from"./HelperFunctions-DWwEU7oF.js";import{C as U}from"./CustomTextArea-BvZd_Hkf.js";import{C as te}from"./CustomButtons-2kTcvzb6.js";import{S as Fe}from"./SettingModalWrapper-BBTsJWKS.js";import{c as de,a as le,b as T,d as q,e as X}from"./index.esm-D49cUJoZ.js";import{M as k}from"./Materialcons-Die1CzwC.js";import"./Tabs-DUTfjCyQ.js";import"./Tooltip-Ekydzdoo.js";import"./Checkbox-C1UzI-gw.js";import"./Search-DNIIj65s.js";const Ne="/assets/company-location-page-BxyOcDh4.svg",Te="/assets/company-need-DJ-AasZS.svg",ze="/assets/company-served-M7suOfYb.svg",Me="/assets/blue-file-CXZUsK27.svg",Le="data:image/svg+xml,%3csvg%20width='65'%20height='64'%20viewBox='0%200%2065%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='location%201'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M32.5002%202.06055C30.1969%202.06055%2027.9163%202.51421%2025.7884%203.39563C23.6605%204.27706%2021.727%205.56898%2020.0984%207.19763C18.4698%208.82628%2017.1779%2010.7598%2016.2966%2012.8877C15.4152%2015.0156%2014.9616%2017.2963%2014.9617%2019.5995C14.9617%2031.9995%2032.5002%2055.673%2032.5002%2055.673C32.5002%2055.673%2050.0387%2033.295%2050.0387%2019.5995C50.0387%2017.2963%2049.5851%2015.0156%2048.7038%2012.8877C47.8224%2010.7598%2046.5305%208.82628%2044.9019%207.19763C43.2733%205.56898%2041.3399%204.27706%2039.212%203.39563C37.0841%202.51421%2034.8034%202.06055%2032.5002%202.06055ZM32.5002%2029.3105C30.5797%2029.3106%2028.7024%2028.7413%2027.1056%2027.6744C25.5087%2026.6076%2024.2641%2025.0912%2023.529%2023.317C22.794%2021.5428%2022.6016%2019.5905%2022.9761%2017.7069C23.3506%2015.8233%2024.2753%2014.0931%2025.6331%2012.7351C26.991%2011.377%2028.721%2010.4521%2030.6045%2010.0773C32.488%209.70246%2034.4404%209.89458%2036.2147%2010.6293C37.989%2011.3641%2039.5056%2012.6085%2040.5727%2014.2052C41.6398%2015.8019%2042.2095%2017.6791%2042.2097%2019.5995C42.2097%2022.1747%2041.1867%2024.6443%2039.3658%2026.4652C37.5449%2028.2861%2035.0753%2029.309%2032.5002%2029.309V29.3105Z'%20fill='%23EF3C49'/%3e%3cpath%20id='Vector_2'%20d='M32.5001%2061.3078C24.2876%2061.3078%2012.0701%2059.8113%2012.0701%2055.6878C12.0701%2052.8328%2017.6746%2051.4233%2022.3761%2050.7428C22.6029%2050.7159%2022.8312%2050.7787%2023.0123%2050.9178C23.1935%2051.0568%2023.3132%2051.2612%2023.3458%2051.4872C23.3784%2051.7132%2023.3214%2051.9431%2023.1869%2052.1277C23.0525%2052.3123%2022.8512%2052.4371%2022.6261%2052.4754C16.2101%2053.4034%2013.8196%2054.9383%2013.8196%2055.6878C13.8196%2057.0013%2020.4126%2059.5578%2032.4996%2059.5578C44.5866%2059.5578%2051.1796%2057.0013%2051.1796%2055.6878C51.1796%2054.9878%2048.7421%2053.2443%2041.2086%2052.3198C40.9824%2052.2867%2040.7782%2052.1663%2040.6395%2051.9845C40.5009%2051.8028%2040.4389%2051.574%2040.4667%2051.3471C40.4945%2051.1202%2040.61%2050.9132%2040.7884%2050.7703C40.9668%2050.6274%2041.1941%2050.5599%2041.4216%2050.5824C45.7216%2051.1104%2052.9296%2052.4748%2052.9296%2055.6878C52.9301%2059.8113%2040.7126%2061.3078%2032.5001%2061.3078Z'%20fill='%2335D0BA'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Be=({formik:a,isEdit:d})=>{const{platformFilteredData:c}=ie(oe),[p,C]=b.useState({email:"",error:""}),A=o=>{const t=o.target.value;C(F=>({...F,email:t}))},w=o=>{["Tab","Enter",","].includes(o.key)&&(o.preventDefault(),p.email&&Ee(p.email)&&p.email.endsWith(a.values.domain.slice(0))&&!a.errors.domain?a.values.admins.includes(p.email)?(a.setFieldError("admins","Admin already added"),z.error("Admin already added")):(a.setFieldValue("admins",[...a.values.admins,p.email]),C({email:"",error:""})):a.values.domain.length===0||a.errors.domain?a.errors.domain?(a.setFieldError("admins","Please enter valid company domain first"),z.error("Please enter valid company domain first")):a.setFieldError("domain","Please add company domain first"):p.email.endsWith(a.values.domain.slice(0))?a.setFieldError("admins",`${p.email} invalid e-mail`):(a.setFieldError("admins","Domain does'nt matches with the company domain"),z.error("Domain does'nt matches with the company domain")))},I=o=>{const t=a.values.admins.filter((F,D)=>D!==o);a.setFieldValue("admins",t)};return e.jsxs(e.Fragment,{children:[" ",e.jsx(V,{children:e.jsxs(i,{display:"flex",sx:{maxWidth:"755px",mx:"auto"},children:[e.jsx(i,{width:"60px"}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(G,{title:"Company details",imageSrc:De,imgHeight:"106",description:"Company titles and images - will be showcased as such"}),e.jsxs(i,{mt:"44px",id:"companyName",children:[e.jsx(B,{value:a.values.companyName,onChange:o=>{var t;a.setFieldValue("companyName",(t=o==null?void 0:o.target)==null?void 0:t.value)},maxLength:50,placeholder:"Type Company Name here..",border:"none",fontSize:"24px",placeholderFontSize:"24px",placeholderFontWeight:400,placeholderFontFamily:"Noto Serif",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}}),a.touched.companyName&&a.errors.companyName&&e.jsx(i,{children:e.jsx(j,{message:a.errors.companyName})})]}),e.jsxs(i,{mt:"32px",id:"logoImage",children:[e.jsx(Y,{formik:a,isEdit:!1,fieldName:"logoImage",imgLimit:1,allowOnly:"svg"}),a.touched.logoImage&&a.errors.logoImage&&e.jsx(i,{children:e.jsx(j,{message:a.errors.logoImage})})]}),e.jsxs(i,{mt:"32px",id:"vertical",children:[e.jsx(ne,{label:"Select Platform",options:c,value:a.values.vertical,onChange:o=>{var t;return a.setFieldValue("vertical",(t=o==null?void 0:o.target)==null?void 0:t.value)}}),a.touched.vertical&&a.errors.vertical&&e.jsx(i,{children:e.jsx(j,{message:a.errors.vertical})})]}),e.jsxs(i,{mt:"32px",id:"domain",children:[e.jsx(B,{value:a.values.domain,onChange:o=>{var t;a.setValues({...a.values,domain:(t=o==null?void 0:o.target)==null?void 0:t.value,admins:[]})},placeholder:"Companies Domain (@companyname.com)",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}}),a.errors.domain&&e.jsx(i,{children:e.jsx(j,{message:a.errors.domain})})]}),e.jsxs(i,{mt:"32px",id:"admins",children:[e.jsx(B,{value:p.email,onChange:A,disabled:d,onBlur:()=>C(o=>({email:"",error:""})),onKeyDown:o=>w(o),placeholder:"Add Admins",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}}),a.values.admins&&a.values.admins.length>0&&e.jsx(i,{display:"flex",gap:1,mt:1,flexWrap:"wrap",children:a.values.admins.map((o,t)=>e.jsx(re,{disabled:d,label:o,sx:{width:"auto"},onDelete:()=>{d||I(t)}},t))}),a.touched.admins&&a.errors.admins&&e.jsx(i,{children:e.jsx(j,{message:a.errors.admins})})]}),e.jsxs(i,{mt:"32px",id:"website",children:[e.jsx(B,{value:a.values.website,onChange:o=>{var t;a.setFieldValue("website",(t=o==null?void 0:o.target)==null?void 0:t.value)},placeholder:"Companies website (URL)",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}}),a.touched.website&&a.errors.website&&e.jsx(i,{children:e.jsx(j,{message:a.errors.website})})]})]}),e.jsx(i,{width:"60px"})]})}),e.jsx(i,{mt:"16px",children:e.jsx(V,{children:e.jsxs(i,{display:"flex",sx:{maxWidth:"755px",mx:"auto"},children:[e.jsx(i,{width:"60px"}),e.jsx(i,{sx:{flex:1},children:e.jsxs(i,{children:[e.jsx(Y,{formik:a,fieldName:"companyImages",imgLimit:7}),a.touched.companyImages&&a.errors.companyImages&&e.jsx(i,{id:"companyImages",children:e.jsx(j,{message:a.errors.companyImages})}),e.jsx(i,{id:"companyImages"})]})}),e.jsx(i,{width:"60px"})]})})})]})},qe=({formik:a})=>e.jsxs(e.Fragment,{children:[" ",e.jsx(V,{children:e.jsxs(i,{display:"flex",sx:{maxWidth:"755px",mx:"auto",minHeight:"70vh"},children:[e.jsx(i,{width:"60px"}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(G,{title:"About company",imageSrc:Te,imgHeight:"75",description:"Adding information - will be showcased as such"}),e.jsxs(i,{mt:"44px",mb:"180px",display:"flex",children:[e.jsxs(i,{flex:1,id:"about",children:[e.jsx(U,{value:a.values.about,maxLength:250,handleChange:d=>{var c;return a.setFieldValue("about",(c=d==null?void 0:d.target)==null?void 0:c.value)},placeholder:"Type about company here... (What we do)"}),a.touched.about&&a.errors.about&&e.jsx(i,{children:e.jsx(j,{message:a.errors.about})})]}),e.jsx(i,{width:"60px",display:"flex",alignItems:"center",children:e.jsx(f,{variant:"body2",sx:S.maxLimitTypo,children:"250 Max"})})]}),e.jsxs(i,{mb:"180px",display:"flex",id:"services",children:[e.jsxs(i,{flex:1,children:[e.jsx(U,{value:a.values.services,maxLength:250,handleChange:d=>{var c;return a.setFieldValue("services",(c=d==null?void 0:d.target)==null?void 0:c.value)},placeholder:"Describe about company here... (Who we are)"}),a.touched.services&&a.errors.services&&e.jsx(i,{children:e.jsx(j,{message:a.errors.services})})]}),e.jsx(i,{width:"60px",display:"flex",alignItems:"center",children:e.jsx(f,{variant:"body2",sx:S.maxLimitTypo,children:"250 Max"})})]})]})]})})]}),Ve=()=>e.jsx(i,{sx:{width:"100%",height:"164px",bgcolor:g.blue2,...S.centerDivCss},children:e.jsxs(i,{sx:{...S.centerDivCss,gap:"28px",flexDirection:"column"},children:[e.jsx(i,{component:"img",src:Me,sx:{width:"83px",height:"79px",objectFit:"contain"}}),e.jsx(f,{variant:"h6",fontFamily:"Chivo",fontWeight:200,children:"Nothing added yet"})]})}),$e=({formik:a})=>{const{industriesFilteredData:d}=ie(me);return e.jsxs(e.Fragment,{children:[" ",e.jsx(V,{children:e.jsxs(i,{display:"flex",sx:{maxWidth:"755px",mx:"auto",minHeight:"70vh"},children:[e.jsx(i,{width:"60px"}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(G,{title:"About company",imageSrc:ze,imgHeight:"119",description:"Adding industries names along with the image - will be showcased as such"}),e.jsxs(i,{mt:"44px",id:"industries",children:[e.jsx(we,{formik:a,fieldName:"industries",placeholder:"Select Industries",options:d}),a.touched.industries&&a.errors.industries&&e.jsx(i,{children:e.jsx(j,{message:a.errors.industries})})]}),a.values.industries.length===0&&e.jsx(i,{mt:"36px",children:e.jsx(Ve,{})})]}),e.jsx(i,{width:"60px"})]})})]})},O=[{name:"Afghanistan",value:1,id:1},{name:"Albania",value:2,id:2},{name:"Algeria",value:3,id:3},{name:"Andorra",value:4,id:4},{name:"Angola",value:5,id:5},{name:"Antigua and Barbuda",value:6,id:6},{name:"Argentina",value:7,id:7},{name:"Armenia",value:8,id:8},{name:"Australia",value:9,id:9},{name:"Austria",value:10,id:10},{name:"Azerbaijan",value:11,id:11},{name:"Bahamas",value:12,id:12},{name:"Bahrain",value:13,id:13},{name:"Bangladesh",value:14,id:14},{name:"Barbados",value:15,id:15},{name:"Belarus",value:16,id:16},{name:"Belgium",value:17,id:17},{name:"Belize",value:18,id:18},{name:"Benin",value:19,id:19},{name:"Bhutan",value:20,id:20},{name:"Bolivia",value:21,id:21},{name:"Bosnia and Herzegovina",value:22,id:22},{name:"Botswana",value:23,id:23},{name:"Brazil",value:24,id:24},{name:"Brunei",value:25,id:25},{name:"Bulgaria",value:26,id:26},{name:"Burkina Faso",value:27,id:27},{name:"Burundi",value:28,id:28},{name:"Cabo Verde",value:29,id:29},{name:"Cambodia",value:30,id:30},{name:"Cameroon",value:31,id:31},{name:"Canada",value:32,id:32},{name:"Central African Republic",value:33,id:33},{name:"Chad",value:34,id:34},{name:"Chile",value:35,id:35},{name:"China",value:36,id:36},{name:"Colombia",value:37,id:37},{name:"Comoros",value:38,id:38},{name:"Congo (Congo-Brazzaville)",value:39,id:39},{name:"Congo (Democratic Republic)",value:40,id:40},{name:"Costa Rica",value:41,id:41},{name:"Croatia",value:42,id:42},{name:"Cuba",value:43,id:43},{name:"Cyprus",value:44,id:44},{name:"Czechia (Czech Republic)",value:45,id:45},{name:"Denmark",value:46,id:46},{name:"Djibouti",value:47,id:47},{name:"Dominica",value:48,id:48},{name:"Dominican Republic",value:49,id:49},{name:"Ecuador",value:50,id:50},{name:"Egypt",value:51,id:51},{name:"El Salvador",value:52,id:52},{name:"Equatorial Guinea",value:53,id:53},{name:"Eritrea",value:54,id:54},{name:"Estonia",value:55,id:55},{name:"Eswatini (fmr. Swaziland)",value:56,id:56},{name:"Ethiopia",value:57,id:57},{name:"Fiji",value:58,id:58},{name:"Finland",value:59,id:59},{name:"France",value:60,id:60},{name:"Gabon",value:61,id:61},{name:"Gambia",value:62,id:62},{name:"Georgia",value:63,id:63},{name:"Germany",value:64,id:64},{name:"Ghana",value:65,id:65},{name:"Greece",value:66,id:66},{name:"Grenada",value:67,id:67},{name:"Guatemala",value:68,id:68},{name:"Guinea",value:69,id:69},{name:"Guinea-Bissau",value:70,id:70},{name:"Guyana",value:71,id:71},{name:"Haiti",value:72,id:72},{name:"Honduras",value:73,id:73},{name:"Hungary",value:74,id:74},{name:"Iceland",value:75,id:75},{name:"India",value:76,id:76},{name:"Indonesia",value:77,id:77},{name:"Iran",value:78,id:78},{name:"Iraq",value:79,id:79},{name:"Ireland",value:80,id:80},{name:"Israel",value:81,id:81},{name:"Italy",value:82,id:82},{name:"Jamaica",value:83,id:83},{name:"Japan",value:84,id:84},{name:"Jordan",value:85,id:85},{name:"Kazakhstan",value:86,id:86},{name:"Kenya",value:87,id:87},{name:"Kiribati",value:88,id:88},{name:"Kuwait",value:89,id:89},{name:"Kyrgyzstan",value:90,id:90},{name:"Laos",value:91,id:91},{name:"Latvia",value:92,id:92},{name:"Lebanon",value:93,id:93},{name:"Lesotho",value:94,id:94},{name:"Liberia",value:95,id:95},{name:"Libya",value:96,id:96},{name:"Liechtenstein",value:97,id:97},{name:"Lithuania",value:98,id:98},{name:"Luxembourg",value:99,id:99},{name:"Madagascar",value:100,id:100},{name:"Malawi",value:101,id:101},{name:"Malaysia",value:102,id:102},{name:"Maldives",value:103,id:103},{name:"Mali",value:104,id:104},{name:"Malta",value:105,id:105},{name:"Marshall Islands",value:106,id:106},{name:"Mauritania",value:107,id:107},{name:"Mauritius",value:108,id:108},{name:"Mexico",value:109,id:109},{name:"Micronesia",value:110,id:110},{name:"Moldova",value:111,id:111},{name:"Monaco",value:112,id:112},{name:"Mongolia",value:113,id:113},{name:"Montenegro",value:114,id:114},{name:"Morocco",value:115,id:115},{name:"Mozambique",value:116,id:116},{name:"Myanmar (Burma)",value:117,id:117},{name:"Namibia",value:118,id:118},{name:"Nauru",value:119,id:119},{name:"Nepal",value:120,id:120},{name:"Netherlands",value:121,id:121},{name:"New Zealand",value:122,id:122},{name:"Nicaragua",value:123,id:123},{name:"Niger",value:124,id:124},{name:"Nigeria",value:125,id:125},{name:"North Korea",value:126,id:126},{name:"North Macedonia",value:127,id:127},{name:"Norway",value:128,id:128},{name:"Oman",value:129,id:129},{name:"Pakistan",value:130,id:130},{name:"Palau",value:131,id:131},{name:"Panama",value:132,id:132},{name:"Papua New Guinea",value:133,id:133},{name:"Paraguay",value:134,id:134},{name:"Peru",value:135,id:135},{name:"Philippines",value:136,id:136},{name:"Poland",value:137,id:137},{name:"Portugal",value:138,id:138},{name:"Qatar",value:139,id:139},{name:"Romania",value:140,id:140},{name:"Russia",value:141,id:141},{name:"Rwanda",value:142,id:142},{name:"Saint Kitts and Nevis",value:143,id:143},{name:"Saint Lucia",value:144,id:144},{name:"Saint Vincent and the Grenadines",value:145,id:145},{name:"Samoa",value:146,id:146},{name:"San Marino",value:147,id:147},{name:"Sao Tome and Principe",value:148,id:148},{name:"Saudi Arabia",value:149,id:149},{name:"Senegal",value:150,id:150},{name:"Serbia",value:151,id:151},{name:"Seychelles",value:152,id:152},{name:"Sierra Leone",value:153,id:153},{name:"Singapore",value:154,id:154},{name:"Slovakia",value:155,id:155},{name:"Slovenia",value:156,id:156},{name:"Solomon Islands",value:157,id:157},{name:"Somalia",value:158,id:158},{name:"South Africa",value:159,id:159},{name:"South Korea",value:160,id:160},{name:"South Sudan",value:161,id:161},{name:"Spain",value:162,id:162},{name:"Sri Lanka",value:163,id:163},{name:"Sudan",value:164,id:164},{name:"Suriname",value:165,id:165},{name:"Sweden",value:166,id:166},{name:"Switzerland",value:167,id:167},{name:"Syria",value:168,id:168},{name:"Taiwan",value:169,id:169},{name:"Tajikistan",value:170,id:170},{name:"Tanzania",value:171,id:171},{name:"Thailand",value:172,id:172},{name:"Timor-Leste",value:173,id:173},{name:"Togo",value:174,id:174},{name:"Tonga",value:175,id:175},{name:"Trinidad and Tobago",value:176,id:176},{name:"Tunisia",value:177,id:177},{name:"Turkey",value:178,id:178},{name:"Turkmenistan",value:179,id:179},{name:"Tuvalu",value:180,id:180},{name:"Uganda",value:181,id:181},{name:"Ukraine",value:182,id:182},{name:"United Arab Emirates",value:183,id:183},{name:"United Kingdom",value:184,id:184},{name:"United States",value:185,id:185},{name:"Uruguay",value:186,id:186},{name:"Uzbekistan",value:187,id:187},{name:"Vanuatu",value:188,id:188},{name:"Vatican City",value:189,id:189},{name:"Venezuela",value:190,id:190},{name:"Vietnam",value:191,id:191},{name:"Yemen",value:192,id:192},{name:"Zambia",value:193,id:193},{name:"Zimbabwe",value:194,id:194}],ee=({open:a,handleClose:d,parentFormik:c,editLocationData:p})=>{const[C,A]=b.useState(!1),[w,I]=b.useState({zipcode:"",country:-1,address:""}),o=de().shape({country:le().required("Country is required").min(1,"Country must be selected"),address:T().required("Address is required").min(5,"Address must be at least 5 characters long")}),t=se({initialValues:w,validationSchema:o,onSubmit:h=>{F(h)}}),F=async h=>{var x,$,W,M,L,P,y,R;A(!0);try{const n=((x=O.find(u=>u.id===h.country))==null?void 0:x.name)||"",m=await ce({zipcode:h.zipcode,country:n,address:h.address});if((($=m==null?void 0:m.data)==null?void 0:$.status_code)===200){let u=c.values.locations;p?(u[p==null?void 0:p.id]={address:h.address,country:n,zipcode:h.zipcode},c==null||c.setFieldValue("locations",u)):c==null||c.setFieldValue("locations",[...u,{zipcode:h.zipcode,country:n,address:h.address}]),d()}}catch(n){const m=(M=(W=n==null?void 0:n.response)==null?void 0:W.data)==null?void 0:M.data;((P=(L=n==null?void 0:n.response)==null?void 0:L.data)==null?void 0:P.status_code)===400?typeof m=="object"&&Array.isArray(m)?m.map(u=>{t.setFieldError(u.fieldname,u.message)}):typeof m=="string"&&z.error(m):((R=(y=n==null?void 0:n.response)==null?void 0:y.data)==null?void 0:R.status_code)===404&&typeof m=="string"&&z.error(m)}finally{A(!1)}},D=h=>{var x;t.setFieldValue("country",(x=h==null?void 0:h.target)==null?void 0:x.value)};return b.useEffect(()=>{t.resetForm({values:w})},[w]),b.useEffect(()=>{var h;p&&I({address:p.address,country:((h=O.find(x=>x.name===p.country))==null?void 0:h.id)||-1,zipcode:p.zipcode})},[p]),e.jsx(ue,{open:a,onClose:d,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx(i,{sx:S.settingsModalStyle,children:e.jsxs(Fe,{title:`${p?"Edit":"Add"} Location`,handleClose:d,children:[e.jsxs(i,{width:"100%",sx:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs(i,{children:[e.jsxs(i,{display:"flex",width:"100%",alignItems:"center",children:[e.jsx(f,{variant:"body1",width:140,sx:S.fieldTypo,children:"ZIP code"}),e.jsx(B,{value:t.values.zipcode,onChange:h=>{var x;t.setFieldValue("zipcode",(x=h==null?void 0:h.target)==null?void 0:x.value)},placeholder:"00-00-00",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}})]}),t.touched.zipcode&&t.errors.zipcode&&e.jsx(i,{ml:"17%",children:e.jsx(j,{message:t.errors.zipcode})})]}),e.jsxs(i,{children:[e.jsxs(i,{display:"flex",width:"100%",alignItems:"center",children:[e.jsx(f,{variant:"body1",width:140,sx:S.fieldTypo,children:"Country"}),e.jsx(ne,{value:t.values.country,label:"Select Country",options:O,onChange:D,sx:{width:"100%","& .MuiOutlinedInput-root":{height:"40px"}}})]}),t.touched.country&&t.errors.country&&e.jsx(i,{ml:"17%",children:e.jsx(j,{message:t.errors.country})})]}),e.jsxs(i,{children:[e.jsxs(i,{display:"flex",width:"100%",alignItems:"center",children:[e.jsx(f,{variant:"body1",width:140,sx:S.fieldTypo,children:"Address"}),e.jsx(B,{value:t.values.address,onChange:h=>{var x;t.setFieldValue("address",(x=h==null?void 0:h.target)==null?void 0:x.value)},placeholder:"Type here..",border:"none",placeholderFontSize:"16px",borderBottom:`1px solid ${g.gray2}`,sx:{width:"100%"}})]}),t.touched.address&&t.errors.address&&e.jsx(i,{ml:"17%",children:e.jsx(j,{message:t.errors.address})})]})]}),e.jsx(i,{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:"35px",children:e.jsx(te,{type:"submit",disabled:C,title:C?"Loading..":p?"Update":"Add",sx:{fontSize:"16px",color:g.white,bgcolor:g.black,":hover":{bgcolor:g.black},height:"44px"}})})]})})})})},We=({formik:a})=>{const[d,c]=b.useState(!1),[p,C]=b.useState(!1),[A,w]=b.useState(),I=()=>{c(!0)},o=()=>{c(!1)};return e.jsxs(e.Fragment,{children:[d&&e.jsx(ee,{parentFormik:a,open:d,handleClose:o}),p&&e.jsx(ee,{parentFormik:a,open:p,handleClose:()=>C(!1),editLocationData:A}),e.jsx(i,{sx:{height:"96px",bgcolor:g.blue2},children:e.jsx(i,{py:"14px",px:"12px",height:"100%",children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:"18px"},children:[e.jsx(i,{component:"img",src:Le,height:"64px"}),e.jsxs(i,{display:"flex",flexDirection:"column",gap:"8px",children:[e.jsx(f,{variant:"body1",fontWeight:600,fontFamily:"Noto Serif",children:"Add Locations"}),e.jsx(f,{variant:"body1",fontWeight:300,sx:{color:g.gray7},children:"Add a branch to make it appear on the map"})]})]}),e.jsx(i,{children:e.jsx(te,{title:"Add",variant:"outlined",onClick:I,sx:{color:g.orange1,borderColor:g.orange1,height:"36px",fontSize:"14px",":hover":{borderColor:g.orange1,bgcolor:"transparent"}}})})]})})}),a.values.locations.length>0&&e.jsx(f,{variant:"body1",sx:{fontFamily:"Noto Serif",mb:"20px",mt:"44px"},children:"Locations"}),e.jsx(H,{spacing:"16px",id:"locations",children:a.values.locations.length>0&&a.values.locations.map((t,F)=>e.jsx(i,{sx:{p:"20px 18px",bgcolor:g.gray13},children:e.jsx(i,{children:e.jsxs(i,{children:[e.jsxs(H,{direction:"row",alignItems:"start",justifyContent:"space-between",mb:2,children:[e.jsx(f,{variant:"h6",textTransform:"capitalize",children:t==null?void 0:t.country}),e.jsxs(H,{direction:"row",children:[e.jsx(K,{disableTouchRipple:!0,onClick:()=>{C(!0),w({...t,id:F})},children:e.jsx(k,{iconName:"EditCustomIcon",sx:{height:"18px",color:"#000"}})}),e.jsx(K,{disableTouchRipple:!0,onClick:()=>{const D=a.values.locations.filter((h,x)=>x!==F);a.setFieldValue("locations",D)},children:e.jsx(k,{iconName:"DeleteCustomIcon",sx:{height:"18px"}})})]})]}),e.jsxs(i,{children:[e.jsx(f,{variant:"body1",fontWeight:300,children:t==null?void 0:t.address}),e.jsx(f,{variant:"body1",fontWeight:300,children:t==null?void 0:t.zipcode})]})]})})}))}),a.touched.locations&&a.errors.locations&&e.jsx(j,{message:a.errors.locations})]})},Pe=({formik:a})=>e.jsx(V,{children:e.jsxs(i,{display:"flex",sx:{maxWidth:"755px",mx:"auto",minHeight:"70vh"},children:[e.jsx(i,{width:"60px"}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(G,{title:"Locations",imageSrc:Ne,imgHeight:"126",description:"Adding Location and description - will be showcased as such"}),e.jsxs(i,{mt:"44px",id:"locationDescription",children:[e.jsx(U,{maxLength:250,value:a.values.locationDescription,handleChange:d=>{var c;return a.setFieldValue("locationDescription",(c=d==null?void 0:d.target)==null?void 0:c.value)},placeholder:"Description.."}),a.touched.locationDescription&&a.errors.locationDescription&&e.jsx(i,{mb:1,children:e.jsx(j,{message:a.errors.locationDescription})})]}),e.jsx(i,{children:e.jsx(We,{formik:a})}),e.jsx(i,{mt:"44px"})]}),e.jsx(i,{width:"60px",children:e.jsx(f,{mt:{xs:11.5,md:10.5},variant:"body2",sx:S.maxLimitTypo,children:"250 Max"})})]})}),ae=de({companyName:T().min(3,"Company name should be at least 3 characters long").max(50,"Company name should be less than 50 characters long").required("Company name is required"),vertical:le().test({name:"vertical",test:function(a){return a===-1?(console.log(a),this.createError({message:"Studio is required"})):!0}}),logoImage:q().min(1,"At least one image is required").of(X().required("Image is required")),domain:T().matches(/^@[\w-]+(\.[\w-]+)+$/,'Domain must be in the format "@companyname.com"').required("Domain is required"),admins:q().of(T().email("Invalid email format").required("Admin email is required")).min(1,"At least one Admin is required").max(7,"A maximum of 7 Admins is allowed").test("domain-exists","Please enter the company domain first",function(a){const{domain:d}=this.parent;return d&&d.match(/^@[\w-]+(\.[\w-]+)+$/)}).test("unique-admins","Admin emails must be unique",function(a){const d=a?a.map(p=>p.toLowerCase()):[];return new Set(d).size===d.length}),website:T().url("Please enter a valid URL").required("Comapny Website (URL) is required"),companyImages:q().min(7,"At least 7 images are required").of(X().required("Images are required")),about:T().min(10,"About company should be at least 10 characters long").max(250,"About company should be less than 250 characters long").required("About company is required"),services:T().min(10,"Description should be at least 10 characters long").max(250,"Description should be less than 250 characters long").required("Description is required"),industries:q().of(T()).min(1,"At least 1 industry is required").required("Insustries are required"),locationDescription:T().min(10,"Location Description should be at least 10 characters long").max(250,"Location Description should be less than 250 characters long").required("Location Description is required"),locations:q().min(1,"At least 1 location is required")}),sa=()=>{const a=pe(),[d,c]=he.useState(0),[p,C]=b.useState(!1),[A,w]=b.useState(!1),[I,o]=b.useState(!1),{id:t}=xe(),F=b.useRef(null),[D,h]=b.useState({companyName:"",logoImage:[],vertical:-1,domain:"",website:"",companyImages:[],about:"",services:"",industries:[],locationDescription:"",locations:[],admins:[]}),x=(n,m)=>{c(m)},$=async n=>{var m,u;w(!0);try{const s=new FormData;s.append("companyName",n.companyName),s.append("logo",n.logoImage[0].file),s.append("logoImageName",n.logoImage[0].name),s.append("domain",n.domain),s.append("vertical",n.vertical.toString()),s.append("website",n.website),s.append("about",n.about),s.append("services",n.services),n.locations.forEach((l,N)=>{s.append(`locations[${N}]`,JSON.stringify(l))}),n.industries.forEach((l,N)=>{s.append(`industries[${N}]`,l)}),n.admins.forEach((l,N)=>{s.append(`admins[${N}]`,l)}),n.companyImages.forEach((l,N)=>{s.append("images",l.file)}),n.companyImages.forEach((l,N)=>{s.append(`imageNames[${N}]`,l.name)}),s.append("locationDescription",n.locationDescription),(await ye(s)).data.status_code===200&&(y.resetForm(),z.success("Company Added"),a(Z()),c(0))}catch(s){const r=(u=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:u.data;if(Array.isArray(r)){if(r.forEach(l=>{y.setFieldError(l.fieldname,l.message)}),r.length>0){const l=r[0];L({[l.fieldname]:l.message}),M({[l.fieldname]:l.message})}}else typeof r=="string"&&z.error(r)}finally{w(!1)}},W=async n=>{var m,u;if(w(!0),t&&btoa(t))try{const s=new FormData;s.append("companyName",n.companyName),s.append("logo",n.logoImage[0].file),s.append("logoImageName",n.logoImage[0].name),s.append("domain",n.domain),s.append("vertical",n.vertical.toString()),s.append("website",n.website),s.append("about",n.about),s.append("services",n.services),n.locations.forEach((v,E)=>{s.append(`locations[${E}]`,JSON.stringify(v))}),n.industries.forEach((v,E)=>{s.append(`industries[${E}]`,v)}),n.admins.forEach((v,E)=>{s.append(`admins[${E}]`,v)}),n.companyImages.filter(v=>typeof v.file=="string").forEach((v,E)=>{typeof v.file=="string"&&(s.append(`existingImageIds[${E}]`,v.file),s.append(`existingImageNames[${E}]`,v.name))}),n.companyImages.filter(v=>typeof v.file=="object").forEach((v,E)=>{typeof v.file=="object"&&(s.append("newImages",v.file),s.append(`newImageNames[${E}]`,v.name))}),s.append("locationDescription",n.locationDescription),(await be(s,atob(t))).data.status_code===200&&(z.success("Company Updated"),a(Z()))}catch(s){const r=(u=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:u.data;if(Array.isArray(r)){if(r.forEach(l=>{y.setFieldError(l.fieldname,l.message)}),r.length>0){const l=r[0];L({[l.fieldname]:l.message}),M({[l.fieldname]:l.message})}}else typeof r=="string"&&z.error(r)}finally{w(!1)}},M=n=>{const m=Object.keys(n);if(m.length>0){const u=m[0];let s=0;_.includes(u)?s=0:J.includes(u)?s=1:Q.includes(u)?s=2:s=3,s!==void 0&&s!==d&&x(null,s),setTimeout(()=>{const r=document.getElementById(u);r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),r.focus())},300)}},L=n=>{const m=Ae(n,ae);if(Object.keys(m).length>0){const u=Object.keys(m)[0];_.includes(u)?c(0):J.includes(u)?c(1):Q.includes(u)?c(2):fe.includes(u)&&c(3)}},P=async n=>{var m,u;C(!0);try{const s=await ve({id:n});if(s.data.status_code===200){const r=(u=(m=s==null?void 0:s.data)==null?void 0:m.data)==null?void 0:u.data[0];r&&h({companyName:r.name,logoImage:[{file:r.logo_image,name:r.logoImageName}],vertical:r.platformId,domain:r.domain,website:r.url,companyImages:r.companyImages.map(l=>({file:l.imageUrl,name:l.imageName})),about:r.description,services:r.services,industries:r.industries.map(l=>l.id),locationDescription:r.locationDescription,locations:r.locations.map(l=>({zipcode:l.zipcode,address:l.address,country:l.country})),admins:r.users.map(l=>l.email)})}}catch{}finally{C(!1)}},y=se({initialValues:D,validationSchema:ae,onSubmit:n=>{I?W(n):$(n)},innerRef:F});b.useEffect(()=>{D&&y.resetForm({values:D})},[D]),b.useEffect(()=>{t&&atob(t)?(o(!0),P(parseInt(atob(t)))):o(!1)},[t]);const R=async n=>{n.preventDefault();const m=await y.validateForm();y.setTouched(Object.keys(y.initialValues).reduce((u,s)=>({...u,[s]:!0}),{})),Object.keys(m).length?(L(m),M(m)):y.handleSubmit()};return e.jsxs(i,{bgcolor:g.white2,borderTop:"1px solid white",children:[(A||p)&&e.jsx(ge,{}),e.jsx(Se,{}),e.jsx(i,{sx:{...S.initialMainComponet,...S.cmsWrapperCss,mx:"auto",minHeight:"100vh"},children:e.jsxs("form",{onSubmit:R,onKeyDown:n=>{n.key==="Enter"&&n.preventDefault()},children:[e.jsx(Ie,{update:I,loading:A,title:e.jsxs(f,{variant:"h4",fontWeight:700,children:[" ",e.jsx(f,{component:"span",variant:"h4",fontWeight:700,sx:{color:g.orange1},children:I?"Edit":"Add"})," ","Company"]})}),e.jsx(je,{tabsData:Ce,handleChange:x,value:d}),d===0&&e.jsx(Be,{formik:y,isEdit:I}),d===1&&e.jsx(qe,{formik:y}),d===2&&e.jsx($e,{formik:y}),d===3&&e.jsx(Pe,{formik:y})]})})]})};export{sa as default};
